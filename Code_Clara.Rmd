---
title: "Code_Clara"
author: "Tommaso Aicardi"
date: "2022-12-08"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE, echo=FALSE}

#install.packages('haven')
#install.packages('dplyr')
#install.packages('leaken')
#install.packages('lsr')
#install.packages('labelled')
#install.packages('knitr')
#install.packages("kableExtra")

library(haven)
library(dplyr)
library(laeken)
library(lsr)
library(labelled)
library(knitr)
library(Hmisc)
library(kableExtra)

rper <- read_dta("rper16.dta")
carcom <- read_dta('carcom16.dta')
q16a <- read_dta('q16a.dta')

df <- merge(carcom, q16a, on='nquest')
df <- merge(df, rper, by=c('nquest','nord'))

remove('carcom','q16a','rper')

df <- data.frame(df$studio,df$y,df$area3,df$ireg)

#DF is the final dataframe containing only: Educational Attainment (STUDIO), Income per Capita(Y), Geog area(AREA3), Region(IREG).
```

# TITLE

## Inroduction

We are gonna do bla bla bla... Shiw 16, Bla bla bla...

## Exploratory Data Analysis

Here we want first to understand how our variables work, and how we can manipulate them to make them useful to our project. First we give a look at the DataFrame.

```{r echo=TRUE}

kable(head(df), 'pipe')

```

### Education

The first thing that we need for our analysis is Educational Attainment of the Population.

```{r echo=FALSE}

df$df.studioLabelled <- ordered(df$df.studio,
                        levels=c(1,2,3,4,5,6,7,8),
                        labels=c('None','Primary','Lower Secondary','Vocational Diploma','Upper Secondary Diplomae','3y Degree','5y Degree','Postgraduate'))

kable(table(df$df.studioLabelled), caption = 'Absolute Frequencies of Educational Attainment in the Dataset', col.names = c('Educational Attainment','Frequency'), 'pipe')

```

------------------------------------------------------------------------

This table shows the distribution of Educational Qualification among the population. For the purpose of the analysis, we will aggregate the observation between people at least graduate, and people at best with a diploma. We will put everything equal or higher than '3Y Degree' it into the same category, and everything lower, into another cateogory.

------------------------------------------------------------------------

```{r,echo=FALSE}

df$graduate <- ifelse(df$df.studio>=6,'At least Graudated','Not Graduated')

kable(table(df$graduate), caption = 'Graduated VS Not Graduated in Absolute Terms in the Dataset', col.names = c('Variable','Frequency'), 'pipe')

```

------------------------------------------------------------------------

This second table instead divides the population between (at least) Graduated and not Graduated.

------------------------------------------------------------------------
## Geographical Area

The second variable we will use for our analysis is the geographic area from which the surveyed population comes from

```{r echo=FALSE}

df$df.area3Labelled <- ordered(df$df.area3,
                        levels=c(1,2,3),
                        labels=c('North','Centre', 'South and Island'))

kable(table(df$df.area3Labelled), caption = 'Absolute Frequencies of Geographical Area in the Dataset', col.names = c('Geografical Area','Frequency'), 'pipe')

```

## Italian Regions 

The third variable we will use for our analysis are the Italian regions from which the surveyed population comes from

```{r echo=FALSE}

df$df.IregLabelled <- ordered(df$df.ireg,
                        levels=c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20),
                    labels=c('Piemonte', "Valle d'Aosta", 'Lombardia', 'Trentino', 'Veneto', 'Friuli', 'Liguria','Emilia Romagna', 'Toscana', 'Umbria', 'Marche', 'Lazio', 'Abruzzo', 'Molise', 'Campania', 'Puglia', 'Basilicata', 'Calabria', 'Sicilia', 'Sardegna'))

kable(table(df$df.IregLabelled), caption = 'Absolute Frequencies of Italian regions in the Dataset', col.names = c('Italian regions','Frequency'), 'pipe')

```



## Block 1 - STUDIO VS AREA3

------------------------------------------------------------------------

## Block 2 - INCOME VS STUDIO VS IREG VS AREA3

------------------------------------------------------------------------

## Block 3 - GEOGRAFPHICAL...
